{"ast":null,"code":"import { IncomingMessage, ServerResponse } from 'http';\nimport DB from '../../../database/db';\n\nconst allSubj = async (req, res) => {\n  try {\n    // Generally, you would not want this in your apps.\n    // See more in 'cors.js'\n    await enablePublicAccess(req, res);\n    const db = new DB();\n    const allEntries = await db.getAll();\n    const lenght = allEntries.length; // Notice: We're manually setting the response object\n    // However Next.JS offers Express-like helpers :)\n    // https://nextjs.org/docs/api-routes/response-helpers\n\n    res.statusCode = 200;\n    res.setHeader('Content-Type', 'application/json');\n    res.end(JSON.stringify({\n      lenght,\n      data: allEntries\n    }));\n  } catch (e) {\n    console.error(e);\n    res.statusCode = 500;\n    res.end(JSON.stringify({\n      length: 0,\n      data: [],\n      error: 'Something went wrong'\n    }));\n  }\n};\n\nexport default allSubj;","map":{"version":3,"sources":["/Users/acrux95/Dropbox/codding/algotive/pages/api/subject/index.js"],"names":["IncomingMessage","ServerResponse","DB","allSubj","req","res","enablePublicAccess","db","allEntries","getAll","lenght","length","statusCode","setHeader","end","JSON","stringify","data","e","console","error"],"mappings":"AAAA,SAASA,eAAT,EAA0BC,cAA1B,QAAgD,MAAhD;AACA,OAAOC,EAAP,MAAe,sBAAf;;AAEA,MAAMC,OAAO,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAClC,MAAI;AACF;AACA;AACA,UAAMC,kBAAkB,CAACF,GAAD,EAAMC,GAAN,CAAxB;AAEA,UAAME,EAAE,GAAG,IAAIL,EAAJ,EAAX;AACA,UAAMM,UAAU,GAAG,MAAMD,EAAE,CAACE,MAAH,EAAzB;AACA,UAAMC,MAAM,GAAGF,UAAU,CAACG,MAA1B,CAPE,CASF;AACA;AACA;;AACAN,IAAAA,GAAG,CAACO,UAAJ,GAAiB,GAAjB;AACAP,IAAAA,GAAG,CAACQ,SAAJ,CAAc,cAAd,EAA8B,kBAA9B;AACAR,IAAAA,GAAG,CAACS,GAAJ,CAAQC,IAAI,CAACC,SAAL,CAAe;AAAEN,MAAAA,MAAF;AAAUO,MAAAA,IAAI,EAAET;AAAhB,KAAf,CAAR;AACD,GAfD,CAeE,OAAOU,CAAP,EAAU;AACVC,IAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACAb,IAAAA,GAAG,CAACO,UAAJ,GAAiB,GAAjB;AACAP,IAAAA,GAAG,CAACS,GAAJ,CACEC,IAAI,CAACC,SAAL,CAAe;AAAEL,MAAAA,MAAM,EAAE,CAAV;AAAaM,MAAAA,IAAI,EAAE,EAAnB;AAAuBG,MAAAA,KAAK,EAAE;AAA9B,KAAf,CADF;AAGD;AACF,CAvBD;;AAyBA,eAAejB,OAAf","sourcesContent":["import { IncomingMessage, ServerResponse } from 'http'\nimport DB from '../../../database/db'\n\nconst allSubj = async (req, res) => {\n  try {\n    // Generally, you would not want this in your apps.\n    // See more in 'cors.js'\n    await enablePublicAccess(req, res)\n\n    const db = new DB()\n    const allEntries = await db.getAll()\n    const lenght = allEntries.length\n\n    // Notice: We're manually setting the response object\n    // However Next.JS offers Express-like helpers :)\n    // https://nextjs.org/docs/api-routes/response-helpers\n    res.statusCode = 200\n    res.setHeader('Content-Type', 'application/json')\n    res.end(JSON.stringify({ lenght, data: allEntries }))\n  } catch (e) {\n    console.error(e)\n    res.statusCode = 500\n    res.end(\n      JSON.stringify({ length: 0, data: [], error: 'Something went wrong' })\n    )\n  }\n}\n\nexport default allSubj\n"]},"metadata":{},"sourceType":"module"}